<h2 class="content-block">Профиль</h2>

<div class="content-block dx-card responsive-paddings">
  <div class="form-avatar">
    <img *ngIf="userAccount.avatar" [src]="avatarUrl | secured | async" alt=""/>
  </div>
  <input type="file" #fileInput (change)="onAvatarUpload($event)" accept="image/jpeg" style="display: none;">
  <dx-button text="Обновить Аватар" icon="upload" (onClick)="triggerFileInput()"></dx-button>
</div>

<div class="content-block dx-card responsive-paddings">
  <dx-form id="form"
           [(formData)]="userAccount"
           labelLocation="top"
           [colCountByScreen]="colCountByScreen">

    <dxi-item
      dataField="email" [editorOptions]="{ disabled: true }">
      <dxo-label
        text="Электронная почта">
      </dxo-label>
    </dxi-item>

    <dxi-item dataField="privilegeLevel" [editorOptions]="{ disabled: true }">
      <dxo-label text="Уровень подписки"></dxo-label>
      <dxo-lookup [dataSource]="privilegeLevelMapping" displayExpr="value" valueExpr="id"></dxo-lookup>
    </dxi-item>

    <dxi-item dataField="firstname">
      <dxo-label
        text="Имя">
      </dxo-label>
    </dxi-item>

    <dxi-item dataField="surname">
      <dxo-label
        text="Фамилия">
      </dxo-label>
    </dxi-item>

    <dxi-item dataField="patronymic">
      <dxo-label
        text="Отчество">
      </dxo-label>
    </dxi-item>
  </dx-form>

  <div class="button-group">
    <dx-button text="Сохранить" (onClick)="update()"></dx-button>
    <dx-button *ngIf="isBasic()" text="Получить Премиум" (onClick)="upgradeToPremium()" type="success"></dx-button>
  </div>
</div>
